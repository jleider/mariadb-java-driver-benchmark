<html>
<head>
<!--
http://htmlpreview.github.io/?https://github.com/rusher/mariadb-java-driver-benchmark/blob/master/results/index.html
-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <link rel="stylesheet" href="./highlight/styles/github.css">
    <script src="./highlight/highlight.pack.js"></script>
    <script>

        google.charts.load('current', {'packages': ['corechart', 'bar']});
        function defaultMariaData() {

            var defaultData = new google.visualization.DataTable();
            defaultData.addColumn('string', 'Select one row');
            defaultData.addColumn('number', 'MariaDB-1.4.4');
            defaultData.addColumn({role: 'annotation', type: 'string'});
            defaultData.addColumn({id: 'min', type: 'number', role: 'interval'});
            defaultData.addColumn({id: 'max', type: 'number', role: 'interval'});
            return defaultData;

        };

        var defaultMariaDBOptions = {
            chartArea: {left: 450, top: 50, width: '50%', height: '55%'},
            hAxis: {
                title: 'microseconds',
                minValue: 0
            },
            series: {
                0: {color: '#3366CC'},
            },
            bars: 'horizontal',
            intervals: {
                barWidth: 0.7,
                shortBarWidth: 5,
                lineWidth: 2,
                style: 'boxes',
            },
            interval: {
                max: {
                    fillOpacity: 0.7,
                    color: '#444'
                },
                min: {
                    fillOpacity: 0.7,
                    color: '#444'
                }
            }
        };

        var defaultOptions = {
            chartArea: {width: '50%'},
            title: 'Time for select 1 row',
            height: 300,
            hAxis: {
                title: 'microseconds',
                minValue: 0
            },
            series: {
                0: {color: '#DB4437'},
                1: {color: '#4285F4'}
            },
            lineWidth: 0,
            //series: [{'color': '#D3362D'}],
            intervals: {
                barWidth: 0.7,
                shortBarWidth: 5,
                lineWidth: 2,
                style: 'boxes',
            },
            interval: {
                max: {
                    fillOpacity: 0.7,
                    color: '#444'
                },
                min: {
                    fillOpacity: 0.7,
                    color: '#444'
                }
            }
        };

        function defaultData() {

            var defaultData = new google.visualization.DataTable();
            defaultData.addColumn('string', 'x');
            defaultData.addColumn('number', 'MySQL-5.1.38');
            defaultData.addColumn({role: 'annotation', type: 'string'});
            defaultData.addColumn({id: 'min', type: 'number', role: 'interval'});
            defaultData.addColumn({id: 'max', type: 'number', role: 'interval'});
            defaultData.addColumn('number', 'MariaDB-1.4.4');
            defaultData.addColumn({role: 'annotation', type: 'string'});
            defaultData.addColumn({id: 'min', type: 'number', role: 'interval'});
            defaultData.addColumn({id: 'max', type: 'number', role: 'interval'});
            defaultData.addColumn('number', 'Drizzle-1.2');
            defaultData.addColumn({role: 'annotation', type: 'string'});
            defaultData.addColumn({id: 'min', type: 'number', role: 'interval'});
            defaultData.addColumn({id: 'max', type: 'number', role: 'interval'});
            return defaultData;
        }
        ;

        function defaultDataWithoutDrizzle() {

            var defaultData = new google.visualization.DataTable();
            defaultData.addColumn('string', 'x');
            defaultData.addColumn('number', 'MySQL-5.1.38');
            defaultData.addColumn({role: 'annotation', type: 'string'});
            defaultData.addColumn({id: 'min', type: 'number', role: 'interval'});
            defaultData.addColumn({id: 'max', type: 'number', role: 'interval'});
            defaultData.addColumn('number', 'MariaDB-1.4.4');
            defaultData.addColumn({role: 'annotation', type: 'string'});
            defaultData.addColumn({id: 'min', type: 'number', role: 'interval'});
            defaultData.addColumn({id: 'max', type: 'number', role: 'interval'});
            return defaultData;
        }
        ;

        function defaultDataMaria15() {
            var defaultData = new google.visualization.DataTable();
            defaultData.addColumn('string', 'x');
            defaultData.addColumn('number', 'MySQL-5.1.38');
            defaultData.addColumn({role: 'annotation', type: 'string'});
            defaultData.addColumn({id: 'min', type: 'number', role: 'interval'});
            defaultData.addColumn({id: 'max', type: 'number', role: 'interval'});
            defaultData.addColumn('number', 'MariaDB-1.5.0-SNAPSHOT');
            defaultData.addColumn({role: 'annotation', type: 'string'});
            defaultData.addColumn({id: 'min', type: 'number', role: 'interval'});
            defaultData.addColumn({id: 'max', type: 'number', role: 'interval'});
            return defaultData;
        }
        ;


        function getBoxPlotValues(array, showpercent) {

            var base = array[0][1];
            for (var i = 0; i < array.length; i++) {
                var length = array[i].length
                var reconstructArray = [array[i][0]];
                for (var j = 1; j < length; j = j + 2) {
                    reconstructArray.push(array[i][j]);
                    if (array[i][j] == 0 || !showpercent) {
                        reconstructArray.push('');
                    } else {
                        reconstructArray.push((Math.round(1000 * (array[i][j]) / base) / 10) + '% ');
                    }

                    reconstructArray.push(array[i][j] - array[i][j + 1]);
                    reconstructArray.push(array[i][j] + array[i][j + 1]);

                }

                array[i] = reconstructArray;
            }
            return array;
        }
        ;

        function getOneBoxPlotValues(array, showpercent) {
            var base = array[0][1];
            for (var i = 0; i < array.length; i++) {
                var length = array[i].length
                var reconstructArray = [array[i][0]];
                reconstructArray.push(array[i][1]);
                reconstructArray.push(showpercent ? (Math.round(1000 * (array[i][1]) / base) / 10) + '% ' : '');
                reconstructArray.push(array[i][1] - array[i][2]);
                reconstructArray.push(array[i][1] + array[i][2]);
                array[i] = reconstructArray;
            }
            return array;
        }
        ;
    </script>

    <style>
        pre {
            overflow: auto;
            font-size: 85%;
            line-height: 1.45;
            border-radius: 3px;
            background: #f7f7f7;
            margin: 8px -7px;
            padding: 8px 7px;
        }
        code {
            padding: 0 0.2em;
            padding-top: 0.2em;
            padding-bottom: 0.2em;
            margin: 0.2em 0;
            font-size: 85%;
            background-color: rgba(0,0,0,0.04);
            border-radius: 3px;
            font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;

        }
        .container {
            width: 980px;
            margin-right: auto;
            margin-left: auto;
        }

        body {
            font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            font-size: 16px;
            line-height: 1.6;
            word-wrap: break-word;
        }
        h1, h2, h3, h4 {
            padding-bottom: 0.3em;
            line-height: 1.225;
            border-bottom: 1px solid #eee;
        }
    </style>
</head>
<body>

<div class="container">

<br/>
    <h1>Execution time for DISTANT database</h1>
    <pre class="java">
Benchmark                                                        Mode  Cnt      Score      Error  Units
BenchmarkOneInsertPrepareWithoutClose.execute                    avgt   25  39486.370 ± 1236.203  us/op
BenchmarkOneInsertPrepareWithoutClose.executeText                avgt   25  39918.398 ± 1431.846  us/op
BenchmarkOneInsertPrepareWithoutClose.prepareAndExecute          avgt   25  79833.521 ±  965.491  us/op
BenchmarkOneInsertPrepareWithoutClose.prepareAndExecuteComMulti  avgt   25  43043.437 ±  541.058  us/op

</pre>

    <div id="box_selectOne"></div>
    <script>
        google.charts.setOnLoadCallback(function () {
            var data = defaultMariaData();
            var array = [
                ['COM_QUERY', 39918.398, 1431.846],
                ['COM_STMT_EXECUTE (prepare in cache)', 39486.370, 1236.203],
                ['COM_STMT_PREPARE + COM_STMT_EXECUTE COM_MULTI', 43043.437,  541.058],
                ['COM_STMT_PREPARE + COM_STMT_EXECUTE', 79833.521,  965.491]
            ];
            data.addRows(getOneBoxPlotValues(array, true));

            var chart = new google.visualization.BarChart(document.getElementById('box_selectOne'));
            var select1RowsOption = defaultMariaDBOptions;
            select1RowsOption.title = "Time for a distant INSERT \"INSERT INTO blackholeTable (charValue) values (?)\"";
            select1RowsOption.height = 300;
            chart.draw(data, select1RowsOption);
        });
    </script>
    <h1>Execution time for LOCAL database</h1>
<pre class="java">
    Benchmark                                                        Mode  Cnt    Score    Error  Units
    BenchmarkOneInsertPrepareWithoutClose.execute                    avgt   25   95.369 ±  1.799  us/op
    BenchmarkOneInsertPrepareWithoutClose.executeText                avgt   25  104.658 ±  3.534  us/op
    BenchmarkOneInsertPrepareWithoutClose.prepareAndExecute          avgt   25  177.278 ± 12.572  us/op
    BenchmarkOneInsertPrepareWithoutClose.prepareAndExecuteComMulti  avgt   25  163.699 ±  3.255  us/op
</pre>

    <div id="box_selectOneLocal"></div>
    <script>
        google.charts.setOnLoadCallback(function () {
            var data = defaultMariaData();
            var array = [
                ['COM_QUERY', 104.658,  3.534],
                ['COM_STMT_EXECUTE (prepare in cache)', 95.369,  1.799],
                ['COM_STMT_PREPARE + COM_STMT_EXECUTE COM_MULTI', 163.699,  3.255],
                ['COM_STMT_PREPARE + COM_STMT_EXECUTE', 177.278, 12.572]
            ];
            data.addRows(getOneBoxPlotValues(array, true));

            var chart = new google.visualization.BarChart(document.getElementById('box_selectOneLocal'));
            var select1RowsOption = defaultMariaDBOptions;
            select1RowsOption.title = "Time for a local INSERT \"INSERT INTO blackholeTable (charValue) values (?)\"";
            select1RowsOption.height = 300;
            chart.draw(data, select1RowsOption);
        });
    </script>

    <script>
        hljs.initHighlightingOnLoad();
    </script>
</div>
</body>
</html>
